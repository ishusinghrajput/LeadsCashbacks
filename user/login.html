<!DOCTYPE html>
<html>
    <head>
        <title>
            Login
        </title>
        <meta name="viewport" content="width=device-width , initial-scale = 1.0">
        <link rel="stylesheet" type="text/css" href="loginstyle.css">
        

    </head>
    <body>
      <div class="toplogo" >
        <img src="logoblack.png" class="logo" onclick="gotohome()" />
        <div class="nav">
            <img src="bulletlist.png" id="bulletlist"  class="bulletlist" onclick="shownavitems()">
        <div class="navitems" id="navitems" style="display: none;">
            <a href="https://leadscashbacks.ml" class="navhome">Home</a>
            <a href="buynow" class="navbuynow">Buy Now</a>
            <a id="navclaim" class="navclaim">Claim Cashback</a>
            <a id="navlogin" class="navlogin">Login</a>
        </div>
        </div>
      </div>
        <div class="main">
        <div class="form" id="form">
            <h1 class="logintext">Login</h1>
            <h3 class="welcometext">Welcome back,</h3>
            <input class="email" id="email" type="text" 
            aria-label="Enter your Email" placeholder="Enter your Email">
            <input class="password" id="password" type="text" 
            aria-label="Enter password" placeholder="Enter password">
            <a id="forgot" class="forgot" onclick="showforgot()">Forgot password?</a>
            <a  class="login" id="login" >Login</a>
            <a href="signup.html" class="dont">Don't have an account? Create One</a>
        </div>
    </div>

    <div class="forgotdiv" id="forgotdiv">
      <h1 class="resettext">Reset Password</h1>
      <input class="forgotemail" id="forgotemail" type="text" 
      aria-label="Enter your Email" placeholder="Enter your Email">
      <a  class="resetbtn" id="resetbtn">Reset Password</a>
    </div> 

    <div class="forgotdiv2" id="forgotdiv2">
      <h1 class="resettext2">Reset Password</h1>
      <h3 class="senttext">We have sent you an email to change your password, Check your inbox.</h3>
      <a  class="gotologinbtn" id="gotologinbtn" onclick="reloadpage()">Go To Login</a>
    </div>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.5/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.5/firebase-analytics.js";
        import { getAuth, onAuthStateChanged , signOut , signInWithEmailAndPassword , sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/9.6.5/firebase-auth.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyAmVcedI8Rm6OEs-zVDL34NGdA-AsSg_yE",
          authDomain: "leadscashbacks.firebaseapp.com",
          databaseURL: "https://leadscashbacks-default-rtdb.asia-southeast1.firebasedatabase.app",
          projectId: "leadscashbacks",
          storageBucket: "leadscashbacks.appspot.com",
          messagingSenderId: "122044315259",
          appId: "1:122044315259:web:b140cd3a156ea5782614de",
          measurementId: "G-8Z17ZG5V4L"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);

        const auth = getAuth();
        onAuthStateChanged(auth, (user) => {
     if (user) {
// User is signed in, see docs for a list of available properties
// https://firebase.google.com/docs/reference/js/firebase.User


const uid = user.uid;
document.getElementById("navlogin").innerHTML = "Logout";
// ...
} else {
// User is signed out

document.getElementById("navlogin").innerHTML = "Login";
// ...
}
});


    document.getElementById("login").addEventListener('click' , (e) => {
      document.getElementById("loading").style.display = "block";
      document.getElementById("login").innerHTML = "Signing In...";
        
        var email = document.getElementById("email").value;
        var password = document.getElementById("password").value;
    
        signInWithEmailAndPassword(auth, email, password)
       .then((userCredential) => {
      // Signed in 
      document.getElementById("loading").style.display = "none";
      document.getElementById("login").innerHTML = "Login";
      location.href = "profile.html";
      const user = userCredential.user;
      // ...
      })
      .catch((error) => {
      const errorCode = error.code;
      const errorMessage = error.message;
      document.getElementById("loading").style.display = "none";
      document.getElementById("login").innerHTML = "Login";
       window.alert(errorMessage)
       });
    });


    document.getElementById("navlogin").addEventListener('click' , (e) => {
        onAuthStateChanged(auth, (user) => {
         if (user) {
    // User is signed in, see docs for a list of available properties
    // https://firebase.google.com/docs/reference/js/firebase.User
    
    const uid = user.uid;
    //Sign out
signOut(auth).then(() => {
  // Sign-out successful.
}).catch((error) => {
  // An error happened.
});
    // ...
  } else {
    // User is signed out
   
    location.href = "login.html";
    // ...
  }
        });   
     });


     document.getElementById("navclaim").addEventListener('click' , (e) => {
        onAuthStateChanged(auth, (user) => {
         if (user) {
    // User is signed in, see docs for a list of available properties
    // https://firebase.google.com/docs/reference/js/firebase.User
    
    const uid = user.uid;
    
    location.href = "profile.html";

    // ...
  } else {
    // User is signed out
   
    location.href = "signup.html";
    // ...
  }
        });   
     });


     document.getElementById("resetbtn").addEventListener('click' , (e) => {
      document.getElementById("loading").style.display = "block";
      var email = document.getElementById("forgotemail").value;
      sendPasswordResetEmail(auth, email)
  .then(() => {
    // Password reset email sent!
    document.getElementById("form").style.display = "none";
          document.getElementById("forgotdiv").style.display = "none";
          document.getElementById("forgotdiv2").style.display = "block";
          document.getElementById("loading").style.display = "none";
    // ..
  })
  .catch((error) => {
    const errorCode = error.code;
    const errorMessage = error.message;
    document.getElementById("loading").style.display = "none";
    window.alert(errorMessage);
    // ..
  });
     });


    </script>
    
    <script>

      document.getElementById("forgotdiv").style.display = "none";
      document.getElementById("forgotdiv2").style.display = "none";

      function shownavitems() {
         if(document.getElementById("navitems").style.display==="none"){
         document.getElementById("navitems").style.display = "block"; 
         }
         else {
          document.getElementById("navitems").style.display = "none"; 
         }
     
        }

        function gotohome() {
         location.href = "https://leadscashbacks.ml"
     
        }

        function showforgot() {
          document.getElementById("form").style.display = "none";
          document.getElementById("forgotdiv2").style.display = "none";
          document.getElementById("forgotdiv").style.display = "block";
     
        }

        function reloadpage() {
         location.reload();
     
        }


    </script>

<script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
<lottie-player class="loading" id="loading" src="https://assets9.lottiefiles.com/packages/lf20_szlepvdh.json"  background="transparent"
  speed="1"  style="width: 300px; height: 300px;"  loop  autoplay></lottie-player>
x

    </body>

</html>
